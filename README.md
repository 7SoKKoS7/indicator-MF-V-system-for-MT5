MasterForex-V MultiTF Indicator for MetaTrader 5
Описание
Индикатор реализует мульти-таймфреймовый анализ по методике MasterForex-V с автоматическим расчетом уровней MF-pivot, направлений тренда (Up/Down/Flat), генерацией сигналов Buy/Sell/Stop, меток выхода и разворота. Все расчеты ведутся параллельно для трех таймфреймов (обычно H1, M15, M5) и визуализируются на одном рабочем графике (обычно M5).
Цель: минимизировать ручное переключение ТФ и дать трейдеру полную картину рынка по ключевым правилам MasterForex-V.

Ключевой алгоритм (коротко):
Получение экстремумов на H1, M15, M5 через ZigZag (или свой аналог).

Определение уровней MF-pivot для каждого ТФ — это важный экстремум, от которого начался текущий импульс.

Анализ направления тренда на каждом ТФ: Up, Down или Flat.

Визуализация:

Горизонтальные линии pivot (разные цвета)

Ломаная ZigZag-линия на рабочем ТФ

Стрелки входа (Buy/Sell) — яркие или бледные (по силе сигнала)

Метки выхода (крестик/Exit) при сломе тренда или достижении цели

Значки глобального разворота тренда (по старшему ТФ)

Панель трендов в углу графика (статус H1/M15/M5)

Логика сигналов строго по методике MF-V:

Сигнал Buy: смена тренда M5 вверх, совпадение направлений на H1+M15 (яркая стрелка)

Ранний сигнал Buy: только H1 совпадает, M15 не подтвердил

Аналогично для Sell

Сигнал выхода: пробой MF-pivot M5 против позиции или смена тренда на M15

Разворот тренда: подтвержденная смена H1 и M15

Текущая реализация
 Получение экстремумов ZigZag на всех 3 ТФ

 Автоматический расчет MF-pivot на каждом ТФ

 Анализ направления тренда (Up/Down/Flat)

 Рисование линий pivot (3 цвета)

 Рисование ZigZag на рабочем ТФ

 Генерация стрелок Buy/Sell по условиям MF-V

 Генерация значков выхода и разворота

 Панель трендов (статус H1/M15/M5)

Это еще предстоит сделать.

 Фильтры для слабых сигналов (добавление осцилляторов, объёмов, свечных паттернов)

 Звуковые/Push-уведомления по сигналам

 Очищение старых объектов по количеству/времени

 Поддержка кастомизации цвета, размера, символов стрелок и Exit

 Автоматизация стоп-лосса (визуальное выделение)

Идеи для улучшения
Добавить расширенные фильтры (например, подтверждение сигналов по объёму, RSI, свечным моделям)

Реализовать автоматический расчет TP/SL на основе MF-pivot и волатильности (ATR)

Интеграция алертов (Alert(), SendNotification())

Вынести параметры индикатора в отдельный блок для гибкой настройки (пороговые значения, цвета, режимы стрелок)

Возможность быстро скрывать/отображать отдельные элементы (например, панель трендов)

Реализация "умного" контроля истории объектов (удаление старых меток)

Вопросы/пожелания для AI/разработчика
Каким образом оптимизировать фильтрацию ложных сигналов на флэте?

Как лучше реализовать адаптацию параметров ZigZag для разных инструментов?

Какие дополнительные фильтры (по опыту, статистике) реально улучшают итоговые результаты MF-V?

Возможно ли интегрировать данный индикатор с советником для частичной автоматизации торговли?

Как улучшить работу с памятью и хранением объектов на графике при длительной работе?

English (Summary for AI/Developers)
Description
Multi-timeframe indicator (MF-V system) for MT5: calculates and plots MF-pivot levels, trend directions (Up/Down/Flat), entry/exit signals, and trend reversal marks, all visualized on a single chart.
Core algorithm: ZigZag extraction, pivot detection, trend analysis per TF, strict signal logic per MF-V books.

Status
Fully implemented: ZigZag, pivot, trend logic, all main drawings, entry/exit/reversal signals, trend status panel.

Not yet: advanced filters (volumes, oscillators, patterns), notifications, customizable UI, advanced memory cleanup.

Suggestions for Improvement
Add more filters for signals (volume, patterns, etc.)

Alert and notification integration

Code refactoring for customizability and performance

(see Russian section above for details)

Структура файлов
Индикатор (MQL5)

Документация (PDF, README)

Примеры сигналов и графиков (PNG)

Ссылки
Оригинальный алгоритм: MasterForex-V, книга 3 и PDF

MQL5 ZigZag: https://www.mql5.com/en/articles/2837